<html> 
    <head>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <link href="style.css" rel="stylesheet" type="text/css">
        <script>
            let script = 'javascript:function dfm(){submit(JSON.stringify(question))}function type(e,t,n,s,o="="){if(void 0===r)var r;switch(t){case"input":$("input[name="+s+"]").val(n);break;case"exp":r=MathQuill.MathField($(".eqnsolutions-answerinput")[s]);try{r.latex("")}catch(e){r=MathQuill.MathField($("#expression-answer")[s]),r.latex("")}r.write(n),"="!==o&&($(".solution-rows").find($("select"))[s].value=o);break;case"coords":r=MathQuill.MathField($(".expression-answer-"+s)[0]),r.latex(""),r.write(n);break;case"fraction":try{$("input[name="+s+"]").val(n)}catch(t){alert(e)}break;case"mcq":$(\'input:radio[name="multiplechoice-answer[]"][value="\'+n+\'"]\').attr("checked",!0);break;case"vector":r=MathQuill.MathField($(".expression-answer-cell")[s]),r.latex(""),r.write(n);break;case"stdform":r=MathQuill.MathField($(".expression-answer-"+s)[0]),r.latex(""),r.write(n);break;case"list":$(\'input[name="list-answer"]\').val(n);break;case"ordered":let i=[];for(let e=0;e<n.length;++e)i[e]=n.indexOf(e+1);$("#question-form-1").find(".answer-content").children().each(function(e){$(this).data("order",i[e]+1)}),alert("For these type of questions, it has worked and your answer will be marked correct but it will not move the items around on screen due to how it is written.");break;case"shape":$(".question-canvas").data("tempShape",n),$(".question-canvas").dfmCanvas("finishDrawing");break;case"ratio":$(".answer-content").find(".expression-answer-ratio").each(function(e){$(this).algebraicInput("latex",n[e])})}}function clearMQC(){for(let e=0;e<$(\'input:radio[name="multiplechoice-answer[]"]\').length;++e)$(\'input:radio[name="multiplechoice-answer[]"][value="\'+e+\'"]\').attr("checked",!1)}function cleanJSON(e){let t="";for(i=0;i<e.length;++i)\'"\'==e.at(i)?t+=\'"\':t+=e.at(i);return t}function submit(e){$.ajax({type:"POST",url:"https://atrika.herokuapp.com/api/world",contentType:"application/json",processData:!1,cache:!1,data:JSON.stringify({qJSON:cleanJSON(e)}),success:function(e){if(e=JSON.parse(e),console.log(e),0==e.typeCount)alert(e.alertString);else for("function"==typeof MathQuill.getInterface&&(MathQuill=MathQuill.getInterface(1)),"multiplechoice"===question.answer.type&&clearMQC(),i=0;i<e.typeCount;++i)type(e.alertString,e.toType[i].type,e.toType[i].text,e.toType[i].pos,e.toType[i].sign)},error:function(e,t,n){alert("error:"+t+" "+n)}})}function dfmLive(t,n){let s;if(correctMessages[0]="You may have hacked, but well done still",conn2.onmessage=function(e){console.log(e.data);var o=JSON.parse(e.data);if("evicted"===o.status)$("#game-area").html("<h1>Your name was considered too inappropriate.</h1><br><br><a href=\'live-joinauthenticate-new.php?gid="+participant.gid+"\' class=\'very-large-button\'>Join Again</a>"),$(".hub-bg").animate({backgroundColor:incorrectColor},1e3);else if("question"===o.status){if(x=!1,"multiplechoice"===o.question.answer.type)s=o.question.answer.correctAnswer.toString();else if("eqnsolutions"===o.question.answer.type)s=o.question.answer.correctAnswer;else if("table"===o.question.answer.type){s=o.question.answer.correctAnswer;for(let e=0;e<s.length;++e)for(let t=0;t<s[e].length;++t)""!==s[e][t]&&(s[e][t]=s[e][t].split(", "));console.log(s)}else if("fraction"===o.question.answer.type)s=o.question.answer.correctAnswer;else if("desmos_line"===o.question.answer.type||"desmos"===o.question.answer.type)s=o.question.answer.correctAnswer;else if("object"==typeof o.question.answer.correctAnswer&&"main"in o.question.answer.correctAnswer&&!("power"in o.question.answer.correctAnswer))s=o.question.answer.correctAnswer.main;else if("numeric"===o.question.answer.type){s=[];let t=o.question.answer.data.rows[0].accuracy;for(e of("range"==t&&(t="from"),"awrt"==t&&(t="exact"),o.question.answer.correctAnswer))s.push(e[t].toString())}else if("expression"===o.question.answer.type){let e=o.question.answer.data.rows[0].accuracy;"range"==e&&(e="from"),"awrt"==e&&(e="exact"),s=o.question.answer.correctAnswer[0][e]}else if("textual"===o.question.answer.type)for(e of(s=[],o.question.answer.correctAnswer)){let t=e.split(" OR ");s.push(t[0])}else s=o.question.answer.correctAnswer;x=!0,1==t?conn2.send(JSON.stringify({status:"submitAnswer",pid:participant.pid,data:s,qid:o.question.id})):2==t?setTimeout(e=>{conn2.send(JSON.stringify({status:"submitAnswer",pid:participant.pid,data:s,qid:o.question.id}))},n):0==t&&setInterval(e=>{x&&conn2.send(JSON.stringify({status:"submitAnswer",pid:participant.pid,data:s,qid:o.question.id}))},n)}else if("lookAtScreen"===o.status)$(".hub-bg").animate({backgroundColor:lookColor},1e3),1==game.studentdisplay?($("#game-area").html("<h1>Please listen to your teacher.</h1><p style=\'font-size:22px\'>Correct Answer: <strong>"+showHTMLAnswer(o.question,o.question.answer.correctAnswer,!1)+"</strong></p>"),MathJax.typeset()):$("#game-area").html("<h1>LOOK AT THE SCREEN</h1>"),console.log(JSON.stringify(o));else if("alreadyanswered"===o.status)$(".hub-bg").animate({backgroundColor:lookColor},1e3),$("#game-area").html("<h1>You\'ve already answered the current question.</h1>");else if("error"===o.status)$("#game-area").html("<h1>"+o.message+"</h1>"),$(".hub-bg").animate({backgroundColor:incorrectColor},1e3);else if("joined"===o.status)console.log("Participant id: "+participant.pid),1===o.gameStatus&&$("#game-area").html("<h1>Ready to Go! Waiting for the game to start...</h1><br><br><img src=\'/homework/img/rolling.svg\'>"),$("#error-window").slideUp();else if("completed"===o.status)gameEnded=!0,conn2.close(),clearInterval(pulseTimerId),$(".hub-bg").animate({backgroundColor:correctColor},1e3),$("#game-area").html("<h1>How did you do?</h1><h2 class=\'pStanding\'>"+ordinal_suffix_of(o.rank)+"</h2><h3 class=\'pStanding\'><strong>Score:</strong> "+o.score+" points</h3>");else if("answerResponse"===o.status){currentDisplay=2;var r=o.data;console.log(JSON.stringify(r)),o.isCorrect?$("#game-area").html("<h1 style=\'display:none\'>"+correctMessages[Math.floor(Math.random()*correctMessages.length)]+"</h1><br><br><img src=\'/homework/img/live-correct.png\'><br><br><small id=\'perfInfo\' style=\'font-size:14px;font-weight:normal;color:#fff\'></small>"):$("#game-area").html("<h1 style=\'display:none\'>"+incorrectMessages[Math.floor(Math.random()*incorrectMessages.length)]+"</h1><br><br><img src=\'/homework/img/live-incorrect.png\'><br><br><small style=\'font-size:14px;font-weight:normal;color:#fff\'>(If for any reason the next question on the board doesn\'t appear, just refresh this page)</small>"),$("#perfInfo").html("<strong>Time:</strong> "+Math.round(o.time)+" secs<br><strong>Points for this question:</strong> "+o.points+"<br><strong>Total points:</strong> "+o.totalPoints),$(".hub-bg").animate({backgroundColor:o.isCorrect?correctColor:incorrectColor},1e3),$("#game-area h1").slideDown()}},void 0!==$("#game-area").data("question")){if("multiplechoice"===question.answer.type)s=question.answer.correctAnswer.toString();else if("eqnsolutions"===question.answer.type)s=question.answer.correctAnswer;else if("fraction"===question.answer.type)s=question.answer.correctAnswer;else if("table"===question.answer.type){s=question.answer.correctAnswer;for(let e=0;e<s.length;++e)for(let t=0;t<s[e].length;++t)""!==s[e][t]&&(s[e][t]=s[e][t].split(", "));console.log(s)}else if("desmos_line"===question.answer.type||"desmos"===question.answer.type)s=question.answer.correctAnswer;else if("object"==typeof question.answer.correctAnswer&&"main"in question.answer.correctAnswer&&!("power"in question.answer.correctAnswer))s=question.answer.correctAnswer.main;else if("numeric"===question.answer.type){s=[];let t=question.answer.data.rows[0].accuracy;for(e of("range"==t&&(t="from"),"awrt"==t&&(t="exact"),question.answer.correctAnswer))s.push(e[t].toString())}else if("expression"===question.answer.type){let e=question.answer.data.rows[0].accuracy;"range"==e&&(e="from"),"awrt"==e&&(e="exact"),s=question.answer.correctAnswer[0][e]}else if("textual"===question.answer.type)for(e of(s=[],msg.question.answer.correctAnswer)){let t=e.split(" OR ");s.push(t[0])}else s=question.answer.correctAnswer.toString();x=!0,1==t?conn2.send(JSON.stringify({status:"submitAnswer",pid:participant.pid,data:s,qid:question.id})):2==t?setTimeout(e=>{conn2.send(JSON.stringify({status:"submitAnswer",pid:participant.pid,data:s,qid:question.id}))},n):0==t&&setInterval(e=>{x&&conn2.send(JSON.stringify({status:"submitAnswer",pid:participant.pid,data:s,qid:question.id}))},50)}}function teachometer(){let e=prompt("Question Number (type \'all\' for all questions at once / \'all check\' to answer all and check answers): ");if(""==e)return console.log("No input"),-1;switch(e.toLowerCase()){case"all":for(let e=1;e<ScoreLogic.instances[0].settings.questionsExcludingNotes.length+1;++e)getAnswer(e);break;case"all check":for(let e=1;e<ScoreLogic.instances[0].settings.questionsExcludingNotes.length+1;++e)getAnswer(e);checkAns();break;default:if(!qExists(e))return console.log("Question "+e+" does not exist in this lesson (or there was an error)"),alert("Question "+e+" does not exist in this lesson (or there was an error)"),-2;getAnswer(e)}}function getAnswer(e){let t=ScoreLogic.instances[0].settings.questionsExcludingNotes[e-1];if("sudoku"==t.classes[0]||"template"==t.classes[0]){let e=-1;for(let n=0;n<t.contentDiv.setValueFields.length&&-1==e;++n)Object.hasOwn(t.contentDiv.setValueFields[n],"radioCups")&&(e=n);if(-1==e)for(let e=0;e<Object.keys(t.commentLogic.inputsWithCommentLetters).length;++e){let n=Object.keys(t.commentLogic.inputsWithCommentLetters)[e],s=t.commentLogic.inputsWithCommentLetters[n].UID;if("input"==t.commentLogic.inputsWithCommentLetters[n].tagName)isNaN(t.commentLogic.engine.allVariablesAndFunctions[n]._value)?document.getElementById(s).value=t.commentLogic.engine.allVariablesAndFunctions[n]._value:document.getElementById(s).value=parseFloat(parseFloat(t.commentLogic.engine.allVariablesAndFunctions[n]._value).toPrecision(12)),document.getElementById(s).focus(),ICup.cupsById[s]._events.onblur.forEach(e=>e(event));else if("select"==t.commentLogic.inputsWithCommentLetters[n].tagName){let e=t.commentLogic.engine.allVariablesAndFunctions[n]._value;e=e.substr(1,e.length-2),document.getElementById(s).value=e,document.getElementById(s).focus(),ICup.cupsById[s]._events.onchange.forEach(e=>e(event))}}else{let n=-1,s=-1;for(let e=0;e<27&&-1==s;++e)Object.hasOwn(t.commentLogic.inputsWithCommentLetters,String.fromCharCode(e+97))&&(s=t.commentLogic.engine.allVariablesAndFunctions[String.fromCharCode(e+97)]._value);for(let s=0;s<t.contentDiv.setValueFields[e].radioCups.length;++s)n=t.contentDiv.setValueFields[e].radioCups[s].UID,document.getElementById(n).checked=!1;n=t.contentDiv.setValueFields[e].radioCups[s.charCodeAt(1)-65].UID,document.getElementById(n).focus(),document.getElementById(n).checked=!0,ICup.cupsById[n]._events.onclick.forEach(e=>e(event))}}else if("question"==t.classes[0])if(Object.hasOwn(t.contentDiv.setValueFields[0],"radioCups")){let e=t.commentLogic.engine.correctAnswers,n=0,s="";for(let o=0;o<t.contentDiv.setValueFields.length;++o){for(let e=0;e<t.contentDiv.setValueFields[o].radioCups.length;++e){let n=t.contentDiv.setValueFields[o].radioCups[e].UID;document.getElementById(n).checked=!1}for(let r=0;r<t.contentDiv.setValueFields[o].radioCups.length&&n<Object.keys(t.commentLogic.engine.correctAnswers).length;++r)t.contentDiv.setValueFields[o].radioCups[r].letter==e[Object.keys(t.commentLogic.inputsWithCommentLetters)[n]]&&(s=t.contentDiv.setValueFields[o].radioCups[r].UID,document.getElementById(s).checked=!0,document.getElementById(s).focus(),ICup.cupsById[s]._events.onclick.forEach(e=>e(event)));n++}}else for(let e=0;e<Object.keys(t.commentLogic.engine.correctAnswers).length;++e){let n=Object.keys(t.commentLogic.inputsWithCommentLetters)[e],s=t.commentLogic.inputsWithCommentLetters[String.fromCharCode(e+97)].UID;if("input"==t.commentLogic.inputsWithCommentLetters[n].tagName)isNaN(t.commentLogic.engine.correctAnswers[n])?document.getElementById(s).value=t.commentLogic.engine.correctAnswers[n]:document.getElementById(s).value=parseFloat(parseFloat(t.commentLogic.engine.correctAnswers[n]).toPrecision(12)),document.getElementById(s).focus(),ICup.cupsById[s]._events.onblur.forEach(e=>e(event));else if("select"==t.commentLogic.inputsWithCommentLetters[n].tagName){let n=t.commentLogic.engine.correctAnswers[String.fromCharCode(e+97)];document.getElementById(s).value=n,document.getElementById(s).focus(),ICup.cupsById[s]._events.onchange.forEach(e=>e(event))}}}function checkAns(){let e=window.assignment.submitButtonAndFinalScoreLogic.button.UID;ICup.cupsById[e]._events.onclick.forEach(e=>e(event))}function qExists(e){return e<=ScoreLogic.instances[0].settings.questionsExcludingNotes.length&&e>=1}var x;switch(window.location.hostname){case"teachometer.co.uk":teachometer();break;case"www.drfrostmaths.com":case"drfrostmaths.com":if("/live-participant-new.php"===window.location.pathname){let e,t=prompt("mode: type \'0\' for infinte points, \'1\' for immediately answer all questions without infinite points, \'2\' for answer with custom delay");2==t&&(e=prompt("enter delay time in ms (1000ms = 1s)")),0==t&&(e=prompt("enter delay between submitting answers in ms \n(note do not do anything too low (200ms is recommended) as each response takes a while and may well crash the live if too fast. \nIf it gets too heavy reload (or just close if it freezes) the page to stop)")),dfmLive(t,e)}else dfm();break;default:alert("only dfm and teachometer are supported")}';
        </script>
    </head>
    <body>
        <h2>
            Script with dfm live: <a id="script">DFM & Teachometer Answer Script</a>
            <br><br>
            Also works with teachometer and normal dfm the same as usual
        </h2>
        <script>
            document.getElementById('script').href = script;
        </script>
    </body>
</html>
