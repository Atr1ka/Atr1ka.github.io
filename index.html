<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <link href="style.css" rel="stylesheet" type="text/css">
        <script>
            const script = 'javascript:function main(){switch(window.location.hostname){case"teachometer.co.uk":teachometer();break;case"www.drfrostmaths.com":case"drfrostmaths.com":dfm();break;default:alert("only dfm and teachometer are supported")}}function dfm(){submit(JSON.stringify(question))}function type(e,t){$("input[name="+e+"]").val(t)}function cleanJSON(e){let t="";for(i=0;i<e.length;++i)\'"\'==e.at(i)?t+=\'"\':t+=e.at(i);return t}function submit(e){$.ajax({type:"POST",url:"https://atrika.herokuapp.com/api/world",contentType:"application/json",processData:!1,cache:!1,data:JSON.stringify({qJSON:cleanJSON(e)}),success:function(e){if(e=JSON.parse(e),console.log(e),0==e.typeCount)alert(e.alertString);else for(i=0;i<e.typeCount;++i)type(e.toType[i].nameVal,e.toType[i].text)},error:function(e,t,n){alert("error:"+t+" "+n)}})}function teachometer(){let e=prompt("Question Number (type \'all\' for all questions at once / \'all check\' to answer all and check answers): ");if(""==e)return console.log("No input"),-1;switch(e.toLowerCase()){case"all":for(let e=1;e<ScoreLogic.instances[0].settings.questionsExcludingNotes.length+1;++e)getAnswer(e);break;case"all check":for(let e=1;e<ScoreLogic.instances[0].settings.questionsExcludingNotes.length+1;++e)getAnswer(e);checkAns();break;default:if(!qExists(e))return console.log("Question "+e+" does not exist in this lesson (or there was an error)"),alert("Question "+e+" does not exist in this lesson (or there was an error)"),-2;getAnswer(e)}}function getAnswer(e){var c=ScoreLogic.instances[0].settings.questionsExcludingNotes[e-1];if("sudoku"==c.classes[0]||"template"==c.classes[0]){let o=-1;for(let e=0;e<c.contentDiv.setValueFields.length&&-1==o;++e)Object.hasOwn(c.contentDiv.setValueFields[e],"radioCups")&&(o=e);if(-1==o)for(let e=0;e<Object.keys(c.commentLogic.inputsWithCommentLetters).length;++e){var t=Object.keys(c.commentLogic.inputsWithCommentLetters)[e],n=c.commentLogic.inputsWithCommentLetters[t].UID;if("input"==c.commentLogic.inputsWithCommentLetters[t].tagName)document.getElementById(n).value=parseFloat(parseFloat(c.commentLogic.engine.allVariablesAndFunctions[t]._value).toPrecision(12)),document.getElementById(n).focus(),ICup.cupsById[n]._events.onblur.forEach(e=>e(event));else if("select"==c.commentLogic.inputsWithCommentLetters[t].tagName){let e=c.commentLogic.engine.allVariablesAndFunctions[t]._value;e=e.substr(1,e.length-2),document.getElementById(n).value=e,document.getElementById(n).focus(),ICup.cupsById[n]._events.onchange.forEach(e=>e(event))}}else{let t=-1,n=-1;for(let e=0;e<27&&-1==n;++e)Object.hasOwn(c.commentLogic.inputsWithCommentLetters,String.fromCharCode(e+97))&&(n=c.commentLogic.engine.allVariablesAndFunctions[String.fromCharCode(e+97)]._value);for(let e=0;e<c.contentDiv.setValueFields[o].radioCups.length;++e)t=c.contentDiv.setValueFields[o].radioCups[e].UID,document.getElementById(t).checked=!1;t=c.contentDiv.setValueFields[o].radioCups[n.charCodeAt(1)-65].UID,document.getElementById(t).focus(),document.getElementById(t).checked=!0,ICup.cupsById[t]._events.onclick.forEach(e=>e(event))}}else if("question"==c.classes[0])if(Object.hasOwn(c.contentDiv.setValueFields[0],"radioCups")){let n=c.commentLogic.engine.correctAnswers,o=0,s="";for(let t=0;t<c.contentDiv.setValueFields.length;++t){for(let e=0;e<c.contentDiv.setValueFields[t].radioCups.length;++e){var i=c.contentDiv.setValueFields[t].radioCups[e].UID;document.getElementById(i).checked=!1}for(let e=0;e<c.contentDiv.setValueFields[t].radioCups.length&&o<Object.keys(c.commentLogic.engine.correctAnswers).length;++e)c.contentDiv.setValueFields[t].radioCups[e].letter==n[Object.keys(c.commentLogic.inputsWithCommentLetters)[o]]&&(s=c.contentDiv.setValueFields[t].radioCups[e].UID,document.getElementById(s).checked=!0,document.getElementById(s).focus(),ICup.cupsById[s]._events.onclick.forEach(e=>e(event)));o++}}else for(let e=0;e<Object.keys(c.commentLogic.engine.correctAnswers).length;++e){var o=Object.keys(c.commentLogic.inputsWithCommentLetters)[e],s=c.commentLogic.inputsWithCommentLetters[String.fromCharCode(e+97)].UID;"input"==c.commentLogic.inputsWithCommentLetters[o].tagName?(document.getElementById(s).value=parseFloat(parseFloat(c.commentLogic.engine.correctAnswers[String.fromCharCode(e+97)]).toPrecision(12)),document.getElementById(s).focus(),ICup.cupsById[s]._events.onblur.forEach(e=>e(event))):"select"==c.commentLogic.inputsWithCommentLetters[o].tagName&&(o=c.commentLogic.engine.correctAnswers[String.fromCharCode(e+97)],document.getElementById(s).value=o,document.getElementById(s).focus(),ICup.cupsById[s]._events.onchange.forEach(e=>e(event)))}}function checkAns(){var e=window.assignment.submitButtonAndFinalScoreLogic.button.UID;ICup.cupsById[e]._events.onclick.forEach(e=>e(event))}function qExists(e){return e<=ScoreLogic.instances[0].settings.questionsExcludingNotes.length&&1<=e}main();';
            //show password script isnt mine, i just needed somewhere to put it
            const showPasswords = 'javascript:Array.prototype.slice.call(document.querySelectorAll("input[type=\'password\']")).map(function(el){el.setAttribute(\'type\',\'text\')})';
        </script>
    </head>
    <body>
        <h2>
            Hello there!<br>To use this script (DFM and teachometer combined), drag this link (<a id="script">DFM & Teachometer Answer Script</a>) to your bookmarks bar and when you are on a DFM or teachometer page question, just click the bookmark.
            <br><br>
            The source code for the teachometer script and the client side of the dfm script are public on my <a id="github" href="https://github.com/Atr1ka">github</a>. 
            <br>
            If you want the 2 scripts seperarately, they are on github <a id="github" href="https://github.com/Atr1ka/DFM-Answers-Client">here for dfm</a> and <a id="github" href="https://github.com/Atr1ka/Teachometer-Answer-Script">here for dfm</a>.
            &nbsp&nbsp&nbsp&nbsp&nbsp
            <a id="passwordScript" style="color: transparent">&nbsp&nbsp</a>
        </h2>
        <script>
            document.getElementById('script').href = script;
            document.getElementById('passwordScript').href = showPasswords;
        </script>
    </body>
</html>
