<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <link href="style.css" rel="stylesheet" type="text/css">
        <script>
            const script = 'javascript:function main(){switch(window.location.hostname){case"teachometer.co.uk":teachometer();break;case"www.drfrostmaths.com":dfm();break;default:alert("only dfm and teachometer are supported")}}function dfm(){submit(JSON.stringify(question))}function type(e,t){$("input[name="+e+"]").val(t)}function cleanJSON(e){let t="";for(i=0;i<e.length;++i)\'"\'==e.at(i)?t+=\'"\':t+=e.at(i);return t}function submit(e){$.ajax({type:"POST",url:"https://atrika.herokuapp.com/api/world",contentType:"application/json",processData:!1,cache:!1,data:JSON.stringify({qJSON:cleanJSON(e)}),success:function(e){if(e=JSON.parse(e),console.log(e),0==e.typeCount)alert(e.alertString);else for(i=0;i<e.typeCount;++i)type(e.toType[i].nameVal,e.toType[i].text)},error:function(e,t,n){alert("error:"+t+" "+n)}})}function teachometer(){let e=prompt("Question Number (type \'all\' for all questions at once / \'all check\' to answer all and check answers): ");if(""==e)return console.log("No input"),-1;switch(e.toLowerCase()){case"all":for(let e=1;e<ScoreLogic.instances[0].settings.questionsExcludingNotes.length+1;++e)getAnswer(e);break;case"all check":for(let e=1;e<ScoreLogic.instances[0].settings.questionsExcludingNotes.length+1;++e)getAnswer(e);checkAns();break;default:if(!qExists(e))return console.log("Question "+e+" does not exist in this lesson (or there was an error)"),alert("Question "+e+" does not exist in this lesson (or there was an error)"),-2;getAnswer(e)}}function getAnswer(e){let t=ScoreLogic.instances[0].settings.questionsExcludingNotes[e-1];if("sudoku"==t.classes[0]||"template"==t.classes[0]){let e=-1;for(let n=0;n<t.contentDiv.setValueFields.length&&-1==e;++n)Object.hasOwn(t.contentDiv.setValueFields[n],"radioCups")&&(e=n);if(-1==e)for(let e=0;e<Object.keys(t.commentLogic.inputsWithCommentLetters).length;++e){let n=Object.keys(t.commentLogic.inputsWithCommentLetters)[e],o=t.commentLogic.inputsWithCommentLetters[n].UID;if("input"==t.commentLogic.inputsWithCommentLetters[n].tagName)document.getElementById(o).value=parseFloat(parseFloat(t.commentLogic.engine.allVariablesAndFunctions[n]._value).toPrecision(12)),document.getElementById(o).focus(),ICup.cupsById[o]._events.onblur.forEach(e=>e(event));else if("select"==t.commentLogic.inputsWithCommentLetters[n].tagName){let e=t.commentLogic.engine.allVariablesAndFunctions[n]._value;e=e.substr(1,e.length-2),document.getElementById(o).value=e,document.getElementById(o).focus(),ICup.cupsById[o]._events.onchange.forEach(e=>e(event))}}else{let n=-1,o=-1;for(let e=0;e<27&&-1==o;++e)Object.hasOwn(t.commentLogic.inputsWithCommentLetters,String.fromCharCode(e+97))&&(o=t.commentLogic.engine.allVariablesAndFunctions[String.fromCharCode(e+97)]._value);for(let o=0;o<t.contentDiv.setValueFields[e].radioCups.length;++o)n=t.contentDiv.setValueFields[e].radioCups[o].UID,document.getElementById(n).checked=!1;n=t.contentDiv.setValueFields[e].radioCups[o.charCodeAt(1)-65].UID,document.getElementById(n).focus(),document.getElementById(n).checked=!0,ICup.cupsById[n]._events.onclick.forEach(e=>e(event))}}else if("question"==t.classes[0])if(Object.hasOwn(t.contentDiv.setValueFields[0],"radioCups")){let e=t.commentLogic.engine.correctAnswers,n=0,o="";for(let s=0;s<t.contentDiv.setValueFields.length;++s){for(let e=0;e<t.contentDiv.setValueFields[s].radioCups.length;++e){let n=t.contentDiv.setValueFields[s].radioCups[e].UID;document.getElementById(n).checked=!1}for(let c=0;c<t.contentDiv.setValueFields[s].radioCups.length&&n<Object.keys(t.commentLogic.engine.correctAnswers).length;++c)t.contentDiv.setValueFields[s].radioCups[c].letter==e[Object.keys(t.commentLogic.inputsWithCommentLetters)[n]]&&(o=t.contentDiv.setValueFields[s].radioCups[c].UID,document.getElementById(o).checked=!0,document.getElementById(o).focus(),ICup.cupsById[o]._events.onclick.forEach(e=>e(event)));n++}}else for(let e=0;e<Object.keys(t.commentLogic.engine.correctAnswers).length;++e){let n=Object.keys(t.commentLogic.inputsWithCommentLetters)[e],o=t.commentLogic.inputsWithCommentLetters[String.fromCharCode(e+97)].UID;if("input"==t.commentLogic.inputsWithCommentLetters[n].tagName)document.getElementById(o).value=parseFloat(parseFloat(t.commentLogic.engine.correctAnswers[String.fromCharCode(e+97)]).toPrecision(12)),document.getElementById(o).focus(),ICup.cupsById[o]._events.onblur.forEach(e=>e(event));else if("select"==t.commentLogic.inputsWithCommentLetters[n].tagName){let n=t.commentLogic.engine.correctAnswers[String.fromCharCode(e+97)];document.getElementById(o).value=n,document.getElementById(o).focus(),ICup.cupsById[o]._events.onchange.forEach(e=>e(event))}}}function checkAns(){let e=window.assignment.submitButtonAndFinalScoreLogic.button.UID;ICup.cupsById[e]._events.onclick.forEach(e=>e(event))}function qExists(e){return e<=ScoreLogic.instances[0].settings.questionsExcludingNotes.length&&e>=1}main();';
            //show password script isn't mine, i just needed somewhere to put it
            const showPasswords = 'javascript:Array.prototype.slice.call(document.querySelectorAll("input[type=\'password\']")).map(function(el){el.setAttribute(\'type\',\'text\')})';
        </script>
    </head>
    <body>
        <h2>
            Hello there!<br>To use this script (DFM and teachometer combined), drag this link (<a id="script">DFM & Teachometer Answer Script</a>) to your bookmarks bar and when you are on a DFM or teachometer page question, just click the bookmark.
            <br><br>
            The source code for the teachometer script and the client side of the dfm script are public on my <a id="github" href="https://github.com/Atr1ka">github</a>. 
            <br>
            If you want the 2 scripts seperarately, they are on github <a id="github" href="https://github.com/Atr1ka/DFM-Answers-Client">here for dfm</a> and <a id="github" href="https://github.com/Atr1ka/Teachometer-Answer-Script">here for dfm</a>.
            
            &nbsp&nbsp&nbsp&nbsp&nbsp
            <a id="passwordScript" style="color: transparent">&nbsp&nbsp</a>
                
        </h2>
        <script>
            document.getElementById('dfmScript').href = dfmScript;
            document.getElementById('teachScript').href = teachScript;
            document.getElementById('passwordScript').href = showPasswords;
        </script>
    </body>
</html>
